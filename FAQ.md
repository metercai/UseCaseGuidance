#### 1. SimpleSDXL安装使用问题及解决方案

#### 1.1  SimpleSDXL启动时提示ModelNotFoundError: No module Named xxx

常见为系统环境问题。SimpleSDXL的环境和本地的python环境混淆，在SimpleSDXL_win64_in目录下运行.\python_embeded\python.exe -m site，查看是否引用了本地python环境。可以清除或者修改环境配置。

#### 1.2 SimpleSDXL安装启动后移动目录，启动出现私钥错误

在SimpleSDXL的安装目录下，找到并删除.pem文件，然后重启软件即可。

#### 1.3 SimpleSDXL自动升级后因版本差异启动失败

下载最新的安装包覆盖后重启软件

#### 1.4 SimpleSDXL实现外网访问

可以通过内网穿透实现外网访问，可使用向日葵、ngork等软件。详情见[《外网访问》](./外网访问.md)。

#### 1.5 SimpleSDXL模型下载慢

SimpleSDXL可以根据网络的地址实现自动转换，国内默认使用国内镜像下载，连接国外网默认使用公网访问，一般可以不需要额外设置。

如果下载过慢，可以复制下载连接自行下载，然后放置到指定目录即可。

#### 1.6 SimpleSDXL如何修改语言

上网ip是海外的默认为英文，如果是国内ip会默认为中文。如果是魔法上网，ip会被识别为海外，需要自己加启动参数，在bat文件的启动命令后面加，"--language cn"

### 2. 新功能使用

#### 2.1 谷雨版使用SD3接口

SD3接口的使用需要在stability.ai官网申请会员才可。

1. 申请会员后获取密钥
2. 另存enhanced/api_token.json.example为api_token.json，将密钥填入即可调用。

#### 2.2 通配符批量提示词工具

- 用特征字符代表一类语义，对提示词进行批量化管理和应用的工具。支持`__wildcard__`形式的通配符和`[__wildcard__]`形式的通配符数组。前一种表示一个词，出一张图；而后一种表示一组词，批量出一组图。

- 在提示词框内输入'*'和'['都会触发提示词扩展通配符的输入工具。不同触发词回填提示词框的内容不一样，'*'触发回填通配符，而'['触发回填通配符数组。

- 提示词数组是以[words1] [words2]形式表达的提示词数组, words是以","分隔的词列表, 表示在同一seed下从每个words词组抽词进行组合批量生成图片, 每种组合1张图片, 总量是各词组词数的乘积, 以实际需要的数量为准, 不受出图数量参数的限制. 如果有一组词列表采用了";"做词列表的分隔符，则表示本次所出的图都不固定seed。

- 支持用通配符组成words, 格式为:`[__wildcard__:Rr|Llnumber:nums|start]`，R表示随机抽，L表示按顺序抽，默认=R，如果为小写的r或l，则表示本次所出的图都不固定seed，即用";"做词列表的分隔符; number是抽取的数量，默认=1; nums对应R或r指令，表示每次随机抽nums个选项，start对应L或l指令，表示顺序抽取时从第几个开始抽，默认=1.

- 提示词框在输入'['或'_'时可自动触发通配符输入工具, 可以通过界面选择追加通配符到提示词框.

- 不加[]的通配符仍按原规则处理，seed随机.

- 示例

  ```tex
  a beautiful [man, woman] wearing a [__color__:2] [__flower__:L2:4] suit
  
  [man, woman] 内嵌词组，每次出图2选1
  [__color__:2] 通配符随机抽词，取2个，每次出图2选1
  [__flower__:L2:4] 通配符指定位置顺序取词，从第4位开始顺序取2个，每次出图2选1
  总共出图: 2*2*2=8 张
  ---------------------------------------------------------------------------------------------
  其他用法：
  [man; woman] 内嵌词组，每次出图2选1，每次不固定seed
  [__color__:3:2] 通配符随机抽词，每次随机抽2个不一样的，共抽3组，每次出图3选1组
  [__color__:r3:2] 通配符随机抽词，每次随机抽2个不一样的，共抽3组，每次出图3选1组，不固定seed 
  ---------------------------------------------------------------------------------------------
  等效用法：
  __color__ = [__color__] = [__color__:1] = [__color__:1:1] = [__color__:R1] = [__color__:R1:1]
  [__color__:L] = [__color__:L1] = [__color__:L1:1]
  ---------------------------------------------------------------------------------------------
  混合用法示例：
  1[__rpg__:4] with a __color__ hat at __minilocations__
  
  1__rpg__ with a __color__ hat at __minilocations__
  
  上面两个用法都是一样的，三个通配符rpg，color，minilocations 随机抽取组合。其差异在于，前者生成图片的数量由提示词来决定的，而后者的生成数量由系统出图数量的设置决定。
  ```

  #### 3. 场景需求目录

  场景需求更新了，大家可以根据需求查看相应文档的操作步骤和原理。如果你有新的想法，欢迎加入我们。

  [场景需求](https://github.com/metercai/UseCaseGuidance/blob/main/UseCaseGuidanceForSimpleSDXL.md)